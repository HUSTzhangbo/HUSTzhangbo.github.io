---
title: C++中成员变量的初始化规则
date: 2019-02-18 10:44:59
category: C++
tags: 
- 成员变量
- 初始化
---

首先明确，在定义一个类的时候，仅仅是对该类中的成员变量进行了声明，并未进行定义（也即未分配空间）。在创建对象时，成员变量初始化的顺序为：先进行声明时初始化（即类内初始化），然后进行初始化列表初始化，最后进行构造函数内的赋值操作。

## C++98标准：

1、被static修饰的成员变量只能在类外的全局范围内进行定义与初始化，***例外：***被const和static同时修饰的成员变量也可以在类内进行初始化。
2、其余成员变量只能通过初始化列表或构造函数内的赋值操作进行初始化。
***注：***因为被static修饰的成员变量为所有对象所共有，且单独保存在全局/静态数据域，所以在全局范围内进行定义与初始化既保证了变量的唯一性，又保证了变量的存储区域一致。而其他成员变量属于具体对象，不能通过类直接访问，且有可能保存在堆中或栈中，因此不能在类外进行定义与初始化。

## C++11标准：

1、被static修饰的成员变量只能在类外的全局范围内进行定义与初始化，***例外：***被const和static同时修饰的**整型和枚举类型**的成员变量也可以在类内进行初始化。
2、其余的成员变量可以直接在类内“初始化”。***注：***此处的“初始化”并非定义，可以理解为C++11提供的语法糖。

## 建议：

为了保证代码的正确性与规范性，在编程时应当：
1、被static修饰的成员变量均应在类外的全局范围内进行定义与初始化，以强调静态成员变量的唯一性与所在的区域（全局/静态数据域）。
2、其余变量均应在构造函数的初始化列表或函数体内进行初始化。